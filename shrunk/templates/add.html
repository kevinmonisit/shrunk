{% extends "base.html" %}
{% block content %}
<h1>Shorten a URL</h1>
<article class="add-group clearfix">

    {% if shortened_url %}
    <div class="item">
      <label for="shortened_url">Your shortened URL is</label>
      <span id="shortened_url">{{ shortened_url }}</span>
      <button id="copy_shortened_url" class="btn" title="Copy short link to clipboard">
	<i class="fas fa-copy"></i>
      </button>
    </div>
    {% endif %}

    <form method="POST" action="{{ url_for('add_link') }}" name="link_form"
          class="container" novalidate="novalidate">
        <div class="item">
            <label for="title">Title</label>
            {% if errors %}
            {% if errors["title"] %}
            <span class="error">{{ errors["title"][0] }}</span>
            {% endif %}
            {% endif %}
            <input type="text" class="form-control" id="title" name="title"
                   placeholder="Link Title">
        </div>
        <div class="item">
            <label for="long_url">URL</label>
            {% if errors %}
            {% if errors["long_url"] %}
            <span class="error">{{ errors["long_url"][0] }}</span>
            {% endif %}
            {% endif %}
            <input type="url" class="form-control" id="long_url" name="long_url"
                   placeholder="URL">
        </div>
        {% if "admin" in roles or "power_user" in roles %}
        <div class="item">
            <label for="short_url">Optional Alias</label>
            {% if errors %}
            {% if errors["short_url"] %}
            <span class="error">{{ errors["short_url"][0] }}</span>
            {% endif %}
            {% endif %}
            <input type="text" class="form-control" id="short_url" name="short_url"
                   placeholder="Custom URL Name">
        </div>
        {% endif %}
        <div class="netID">
            <input type="hidden" id="netid" name="netid" value="{{ netid }}">
        </div>
        <button type="submit" class="shrink-button btn btn-default">SHRINK</button>
    </form>

    <script src="{{ url_for('static', filename='js/add.js') }}"></script>
</article>
{% endblock %}
